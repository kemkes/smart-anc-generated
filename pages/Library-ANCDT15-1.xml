<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" xsi:type="a:CqlToElmInfo"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="290">
         <a:s>library ANCDT15</a:s>
      </a:s>
   </annotation>
   <identifier id="ANCDT15" system="http://fhir.org/guides/who/anc-cds"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="3:1-3:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="1">
               <a:s>using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="2" locator="5:1-5:35" localIdentifier="FHIRHelpers" path="http://fhir.org/guides/who/anc-cds/FHIRHelpers" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="2">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="3" locator="7:1-7:31" localIdentifier="Config" path="http://fhir.org/guides/who/anc-cds/ANCConfig">
         <annotation xsi:type="a:Annotation">
            <a:s r="3">
               <a:s>include </a:s>
               <a:s>
                  <a:s>ANCConfig</a:s>
               </a:s>
               <a:s> called Config</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="4" locator="8:1-8:29" localIdentifier="Cx" path="http://fhir.org/guides/who/anc-cds/ANCConcepts">
         <annotation xsi:type="a:Annotation">
            <a:s r="4">
               <a:s>include </a:s>
               <a:s>
                  <a:s>ANCConcepts</a:s>
               </a:s>
               <a:s> called Cx</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="5" locator="9:1-9:42" localIdentifier="PatientData" path="http://fhir.org/guides/who/anc-cds/ANCDataElements">
         <annotation xsi:type="a:Annotation">
            <a:s r="5">
               <a:s>include </a:s>
               <a:s>
                  <a:s>ANCDataElements</a:s>
               </a:s>
               <a:s> called PatientData</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="6" locator="10:1-10:49" localIdentifier="ContactData" path="http://fhir.org/guides/who/anc-cds/ANCContactDataElements">
         <annotation xsi:type="a:Annotation">
            <a:s r="6">
               <a:s>include </a:s>
               <a:s>
                  <a:s>ANCContactDataElements</a:s>
               </a:s>
               <a:s> called ContactData</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <statements>
      <def locator="12:1-12:15" name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand locator="12:1-12:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="103" locator="27:1-38:103" name="Should Conduct counselling on caffeine reduction" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="103">
               <a:s>/*
((((((((((&quot;Daily caffeine intake&quot; = &quot;More than 2 cups of coffee (brewed, filter, instant or espresso)&quot;)
  OR (&quot;Daily caffeine intake&quot; = &quot;More than 4 cups of tea&quot;))
  OR (&quot;Daily caffeine intake&quot; = &quot;More than 12 bars (50g) of chocolate&quot;))
  OR (&quot;Daily caffeine intake&quot; = &quot;More than one can of soda or energy drink&quot;))
  OR (&quot;Daily caffeine intake&quot; = &quot;None of the above daily caffeine intake&quot;))
  OR (IF &quot;Daily caffeine intake&quot; = &quot;More than 2 cups of coffee (brewed, filter, instant, or espresso)&quot; ON MORE THAN ONE CONTACT))
  OR (IF  &quot;Daily caffeine intake&quot; = &quot;More than 4 cups of tea&quot; ON MORE THAN ONE CONTACT))
  OR (IF &quot;Daily caffeine intake&quot; = &quot;More than 12 bars (50 g) of chocolate&quot; ON MORE THAN ONE CONTACT))
  OR (IF &quot;Daily caffeine intake&quot; = &quot;More than one can of soda or energy drink&quot; ON MORE THAN ONE CONTACT))
  OR (IF &quot;Daily caffeine intake&quot; = &quot;None of the above daily caffeine intake&quot; ON MORE THAN ONE CONTACT))
  OR (&quot;Persistant behaviours&quot; = &quot;High caffeine intake&quot;)
*/
define &quot;Should Conduct counselling on caffeine reduction&quot;:
  </a:s>
               <a:s r="102">
                  <a:s r="96">
                     <a:s r="84">
                        <a:s r="72">
                           <a:s r="60">
                              <a:s r="48">
                                 <a:s r="36">
                                    <a:s r="30">
                                       <a:s r="24">
                                          <a:s r="18">
                                             <a:s r="12">
                                                <a:s r="9">
                                                   <a:s>
                                                      <a:s r="8">
                                                         <a:s r="7">
                                                            <a:s>
                                                               <a:s>ContactData.&quot;Daily caffeine intake&quot;</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s> O</a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> in </a:s>
                                                <a:s r="11">
                                                   <a:s r="10">
                                                      <a:s>Cx</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="11">
                                                      <a:s>&quot;Daily caffeine intake - More than 2 cups of coffee Choices&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>
    or </a:s>
                                             <a:s r="17">
                                                <a:s r="14">
                                                   <a:s r="13">
                                                      <a:s>ContactData</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="14">
                                                      <a:s>&quot;Daily caffeine intake&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> in </a:s>
                                                <a:s r="16">
                                                   <a:s r="15">
                                                      <a:s>Cx</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="16">
                                                      <a:s>&quot;Daily caffeine intake - More than 4 cups of tea Choices&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
    or </a:s>
                                          <a:s r="23">
                                             <a:s r="20">
                                                <a:s r="19">
                                                   <a:s>ContactData</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="20">
                                                   <a:s>&quot;Daily caffeine intake&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> in </a:s>
                                             <a:s r="22">
                                                <a:s r="21">
                                                   <a:s>Cx</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="22">
                                                   <a:s>&quot;Daily caffeine intake - More than 12 bars of chocolate Choices&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
    or </a:s>
                                       <a:s r="29">
                                          <a:s r="26">
                                             <a:s r="25">
                                                <a:s>ContactData</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="26">
                                                <a:s>&quot;Daily caffeine intake&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> in </a:s>
                                          <a:s r="28">
                                             <a:s r="27">
                                                <a:s>Cx</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="28">
                                                <a:s>&quot;Daily caffeine intake - More than one can of soda or energy drink Choices&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
    or </a:s>
                                    <a:s r="35">
                                       <a:s r="32">
                                          <a:s r="31">
                                             <a:s>ContactData</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="32">
                                             <a:s>&quot;Daily caffeine intake&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> in </a:s>
                                       <a:s r="34">
                                          <a:s r="33">
                                             <a:s>Cx</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="34">
                                             <a:s>&quot;Daily caffeine intake - None of the above daily caffeine intake Choices&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    or </a:s>
                                 <a:s r="47">
                                    <a:s>(</a:s>
                                    <a:s r="47">
                                       <a:s r="45">
                                          <a:s>Count(</a:s>
                                          <a:s r="44">
                                             <a:s>
                                                <a:s r="38">
                                                   <a:s r="37">
                                                      <a:s>
                                                         <a:s>PatientData.&quot;Daily caffeine intake&quot;</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> O</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> </a:s>
                                             <a:s r="43">
                                                <a:s>where </a:s>
                                                <a:s r="43">
                                                   <a:s r="40">
                                                      <a:s r="39">
                                                         <a:s>O</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="40">
                                                         <a:s>value</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> in </a:s>
                                                   <a:s r="42">
                                                      <a:s r="41">
                                                         <a:s>Cx</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="42">
                                                         <a:s>&quot;Daily caffeine intake - More than 2 cups of coffee Choices&quot;</a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                       <a:s r="46"> >= 2</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    or </a:s>
                              <a:s r="59">
                                 <a:s>(</a:s>
                                 <a:s r="59">
                                    <a:s r="57">
                                       <a:s>Count(</a:s>
                                       <a:s r="56">
                                          <a:s>
                                             <a:s r="50">
                                                <a:s r="49">
                                                   <a:s>
                                                      <a:s>PatientData.&quot;Daily caffeine intake&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> O</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="55">
                                             <a:s>where </a:s>
                                             <a:s r="55">
                                                <a:s r="52">
                                                   <a:s r="51">
                                                      <a:s>O</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="52">
                                                      <a:s>value</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> in </a:s>
                                                <a:s r="54">
                                                   <a:s r="53">
                                                      <a:s>Cx</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="54">
                                                      <a:s>&quot;Daily caffeine intake - More than 4 cups of tea Choices&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                    <a:s r="58"> >= 2</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    or </a:s>
                           <a:s r="71">
                              <a:s>(</a:s>
                              <a:s r="71">
                                 <a:s r="69">
                                    <a:s>Count(</a:s>
                                    <a:s r="68">
                                       <a:s>
                                          <a:s r="62">
                                             <a:s r="61">
                                                <a:s>
                                                   <a:s>PatientData.&quot;Daily caffeine intake&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> O</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="67">
                                          <a:s>where </a:s>
                                          <a:s r="67">
                                             <a:s r="64">
                                                <a:s r="63">
                                                   <a:s>O</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="64">
                                                   <a:s>value</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> in </a:s>
                                             <a:s r="66">
                                                <a:s r="65">
                                                   <a:s>Cx</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="66">
                                                   <a:s>&quot;Daily caffeine intake - More than 12 bars of chocolate Choices&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s r="70"> >= 2</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    or </a:s>
                        <a:s r="83">
                           <a:s>(</a:s>
                           <a:s r="83">
                              <a:s r="81">
                                 <a:s>Count(</a:s>
                                 <a:s r="80">
                                    <a:s>
                                       <a:s r="74">
                                          <a:s r="73">
                                             <a:s>
                                                <a:s>PatientData.&quot;Daily caffeine intake&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> O</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="79">
                                       <a:s>where </a:s>
                                       <a:s r="79">
                                          <a:s r="76">
                                             <a:s r="75">
                                                <a:s>O</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="76">
                                                <a:s>value</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> in </a:s>
                                          <a:s r="78">
                                             <a:s r="77">
                                                <a:s>Cx</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="78">
                                                <a:s>&quot;Daily caffeine intake - More than one can of soda or energy drink Choices&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s r="82"> >= 2</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    or </a:s>
                     <a:s r="95">
                        <a:s>(</a:s>
                        <a:s r="95">
                           <a:s r="93">
                              <a:s>Count(</a:s>
                              <a:s r="92">
                                 <a:s>
                                    <a:s r="86">
                                       <a:s r="85">
                                          <a:s>
                                             <a:s>PatientData.&quot;Daily caffeine intake&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> O</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> </a:s>
                                 <a:s r="91">
                                    <a:s>where </a:s>
                                    <a:s r="91">
                                       <a:s r="88">
                                          <a:s r="87">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="88">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> in </a:s>
                                       <a:s r="90">
                                          <a:s r="89">
                                             <a:s>Cx</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="90">
                                             <a:s>&quot;Daily caffeine intake - None of the above daily caffeine intake Choices&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="94"> >= 2</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    or </a:s>
                  <a:s r="101">
                     <a:s r="98">
                        <a:s r="97">
                           <a:s>ContactData</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="98">
                           <a:s>&quot;Persistent behaviours&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> in </a:s>
                     <a:s r="100">
                        <a:s r="99">
                           <a:s>Cx</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="100">
                           <a:s>&quot;Persistent behaviours - High caffeine intake Choices&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="102" locator="28:3-38:103" xsi:type="Or">
            <operand localId="96" locator="28:3-37:152" xsi:type="Or">
               <operand localId="84" locator="28:3-36:154" xsi:type="Or">
                  <operand localId="72" locator="28:3-35:143" xsi:type="Or">
                     <operand localId="60" locator="28:3-34:136" xsi:type="Or">
                        <operand localId="48" locator="28:3-33:139" xsi:type="Or">
                           <operand localId="36" locator="28:3-32:122" xsi:type="Or">
                              <operand localId="30" locator="28:3-31:124" xsi:type="Or">
                                 <operand localId="24" locator="28:3-30:113" xsi:type="Or">
                                    <operand localId="18" locator="28:3-29:106" xsi:type="Or">
                                       <operand localId="12" locator="28:3-28:106" xsi:type="AnyInValueSet">
                                          <codes xsi:type="Query">
                                             <source alias="X">
                                                <expression localId="9" locator="28:3-28:39" xsi:type="Query">
                                                   <source localId="8" locator="28:3-28:39" alias="O">
                                                      <expression localId="7" locator="28:3-28:37" name="Daily caffeine intake" libraryName="ContactData" xsi:type="ExpressionRef"/>
                                                   </source>
                                                </expression>
                                             </source>
                                             <return distinct="false">
                                                <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand name="X" xsi:type="AliasRef"/>
                                                </expression>
                                             </return>
                                          </codes>
                                          <valueset localId="11" locator="28:44-28:106" name="Daily caffeine intake - More than 2 cups of coffee Choices" libraryName="Cx"/>
                                       </operand>
                                       <operand localId="17" locator="29:8-29:106" xsi:type="AnyInValueSet">
                                          <codes xsi:type="Query">
                                             <source alias="X">
                                                <expression localId="14" locator="29:8-29:42" name="Daily caffeine intake" libraryName="ContactData" xsi:type="ExpressionRef"/>
                                             </source>
                                             <return distinct="false">
                                                <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                   <operand name="X" xsi:type="AliasRef"/>
                                                </expression>
                                             </return>
                                          </codes>
                                          <valueset localId="16" locator="29:47-29:106" name="Daily caffeine intake - More than 4 cups of tea Choices" libraryName="Cx"/>
                                       </operand>
                                    </operand>
                                    <operand localId="23" locator="30:8-30:113" xsi:type="AnyInValueSet">
                                       <codes xsi:type="Query">
                                          <source alias="X">
                                             <expression localId="20" locator="30:8-30:42" name="Daily caffeine intake" libraryName="ContactData" xsi:type="ExpressionRef"/>
                                          </source>
                                          <return distinct="false">
                                             <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand name="X" xsi:type="AliasRef"/>
                                             </expression>
                                          </return>
                                       </codes>
                                       <valueset localId="22" locator="30:47-30:113" name="Daily caffeine intake - More than 12 bars of chocolate Choices" libraryName="Cx"/>
                                    </operand>
                                 </operand>
                                 <operand localId="29" locator="31:8-31:124" xsi:type="AnyInValueSet">
                                    <codes xsi:type="Query">
                                       <source alias="X">
                                          <expression localId="26" locator="31:8-31:42" name="Daily caffeine intake" libraryName="ContactData" xsi:type="ExpressionRef"/>
                                       </source>
                                       <return distinct="false">
                                          <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand name="X" xsi:type="AliasRef"/>
                                          </expression>
                                       </return>
                                    </codes>
                                    <valueset localId="28" locator="31:47-31:124" name="Daily caffeine intake - More than one can of soda or energy drink Choices" libraryName="Cx"/>
                                 </operand>
                              </operand>
                              <operand localId="35" locator="32:8-32:122" xsi:type="AnyInValueSet">
                                 <codes xsi:type="Query">
                                    <source alias="X">
                                       <expression localId="32" locator="32:8-32:42" name="Daily caffeine intake" libraryName="ContactData" xsi:type="ExpressionRef"/>
                                    </source>
                                    <return distinct="false">
                                       <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand name="X" xsi:type="AliasRef"/>
                                       </expression>
                                    </return>
                                 </codes>
                                 <valueset localId="34" locator="32:47-32:122" name="Daily caffeine intake - None of the above daily caffeine intake Choices" libraryName="Cx"/>
                              </operand>
                           </operand>
                           <operand localId="47" locator="33:8-33:139" xsi:type="GreaterOrEqual">
                              <operand localId="45" locator="33:9-33:133" xsi:type="Count">
                                 <source localId="44" locator="33:15-33:132" xsi:type="Query">
                                    <source localId="38" locator="33:15-33:51" alias="O">
                                       <expression localId="37" locator="33:15-33:49" name="Daily caffeine intake" libraryName="PatientData" xsi:type="ExpressionRef"/>
                                    </source>
                                    <where localId="43" locator="33:53-33:132" xsi:type="InValueSet">
                                       <code name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand asType="fhir:string" xsi:type="As">
                                             <operand localId="40" locator="33:59-33:65" path="value" scope="O" xsi:type="Property"/>
                                          </operand>
                                       </code>
                                       <valueset localId="42" locator="33:70-33:132" name="Daily caffeine intake - More than 2 cups of coffee Choices" libraryName="Cx"/>
                                    </where>
                                 </source>
                              </operand>
                              <operand localId="46" locator="33:138" valueType="t:Integer" value="2" xsi:type="Literal"/>
                           </operand>
                        </operand>
                        <operand localId="59" locator="34:8-34:136" xsi:type="GreaterOrEqual">
                           <operand localId="57" locator="34:9-34:130" xsi:type="Count">
                              <source localId="56" locator="34:15-34:129" xsi:type="Query">
                                 <source localId="50" locator="34:15-34:51" alias="O">
                                    <expression localId="49" locator="34:15-34:49" name="Daily caffeine intake" libraryName="PatientData" xsi:type="ExpressionRef"/>
                                 </source>
                                 <where localId="55" locator="34:53-34:129" xsi:type="InValueSet">
                                    <code name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand asType="fhir:string" xsi:type="As">
                                          <operand localId="52" locator="34:59-34:65" path="value" scope="O" xsi:type="Property"/>
                                       </operand>
                                    </code>
                                    <valueset localId="54" locator="34:70-34:129" name="Daily caffeine intake - More than 4 cups of tea Choices" libraryName="Cx"/>
                                 </where>
                              </source>
                           </operand>
                           <operand localId="58" locator="34:135" valueType="t:Integer" value="2" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="71" locator="35:8-35:143" xsi:type="GreaterOrEqual">
                        <operand localId="69" locator="35:9-35:137" xsi:type="Count">
                           <source localId="68" locator="35:15-35:136" xsi:type="Query">
                              <source localId="62" locator="35:15-35:51" alias="O">
                                 <expression localId="61" locator="35:15-35:49" name="Daily caffeine intake" libraryName="PatientData" xsi:type="ExpressionRef"/>
                              </source>
                              <where localId="67" locator="35:53-35:136" xsi:type="InValueSet">
                                 <code name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand asType="fhir:string" xsi:type="As">
                                       <operand localId="64" locator="35:59-35:65" path="value" scope="O" xsi:type="Property"/>
                                    </operand>
                                 </code>
                                 <valueset localId="66" locator="35:70-35:136" name="Daily caffeine intake - More than 12 bars of chocolate Choices" libraryName="Cx"/>
                              </where>
                           </source>
                        </operand>
                        <operand localId="70" locator="35:142" valueType="t:Integer" value="2" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="83" locator="36:8-36:154" xsi:type="GreaterOrEqual">
                     <operand localId="81" locator="36:9-36:148" xsi:type="Count">
                        <source localId="80" locator="36:15-36:147" xsi:type="Query">
                           <source localId="74" locator="36:15-36:51" alias="O">
                              <expression localId="73" locator="36:15-36:49" name="Daily caffeine intake" libraryName="PatientData" xsi:type="ExpressionRef"/>
                           </source>
                           <where localId="79" locator="36:53-36:147" xsi:type="InValueSet">
                              <code name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand asType="fhir:string" xsi:type="As">
                                    <operand localId="76" locator="36:59-36:65" path="value" scope="O" xsi:type="Property"/>
                                 </operand>
                              </code>
                              <valueset localId="78" locator="36:70-36:147" name="Daily caffeine intake - More than one can of soda or energy drink Choices" libraryName="Cx"/>
                           </where>
                        </source>
                     </operand>
                     <operand localId="82" locator="36:153" valueType="t:Integer" value="2" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="95" locator="37:8-37:152" xsi:type="GreaterOrEqual">
                  <operand localId="93" locator="37:9-37:146" xsi:type="Count">
                     <source localId="92" locator="37:15-37:145" xsi:type="Query">
                        <source localId="86" locator="37:15-37:51" alias="O">
                           <expression localId="85" locator="37:15-37:49" name="Daily caffeine intake" libraryName="PatientData" xsi:type="ExpressionRef"/>
                        </source>
                        <where localId="91" locator="37:53-37:145" xsi:type="InValueSet">
                           <code name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:string" xsi:type="As">
                                 <operand localId="88" locator="37:59-37:65" path="value" scope="O" xsi:type="Property"/>
                              </operand>
                           </code>
                           <valueset localId="90" locator="37:70-37:145" name="Daily caffeine intake - None of the above daily caffeine intake Choices" libraryName="Cx"/>
                        </where>
                     </source>
                  </operand>
                  <operand localId="94" locator="37:151" valueType="t:Integer" value="2" xsi:type="Literal"/>
               </operand>
            </operand>
            <operand localId="101" locator="38:8-38:103" xsi:type="AnyInValueSet">
               <codes xsi:type="Query">
                  <source alias="X">
                     <expression localId="98" locator="38:8-38:42" name="Persistent behaviours" libraryName="ContactData" xsi:type="ExpressionRef"/>
                  </source>
                  <return distinct="false">
                     <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand name="X" xsi:type="AliasRef"/>
                     </expression>
                  </return>
               </codes>
               <valueset localId="100" locator="38:47-38:103" name="Persistent behaviours - High caffeine intake Choices" libraryName="Cx"/>
            </operand>
         </expression>
      </def>
      <def localId="139" locator="47:1-52:114" name="Should Conduct counselling on tobacco cessation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="139">
               <a:s>/*
((((&quot;Tobacco use&quot; = TRUE)
  OR (IF &quot;Tobacco use&quot; = TRUE ON MORE THAN ONE CONTACT))
  OR (&quot;Recently quit tobacco products&quot; = TRUE))
  OR (IF &quot;Recently quit tobacco products&quot; = TRUE ON MORE THAN ONE CONTACT))
  OR (&quot;Persistant behaviours&quot; = &quot;Current tobacco use or recently quit&quot;)
*/
define &quot;Should Conduct counselling on tobacco cessation&quot;:
  </a:s>
               <a:s r="138">
                  <a:s r="132">
                     <a:s r="121">
                        <a:s r="117">
                           <a:s r="106">
                              <a:s r="105">
                                 <a:s r="104">
                                    <a:s>ContactData</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="105">
                                    <a:s>&quot;Tobacco use&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> is true</a:s>
                           </a:s>
                           <a:s>
     or </a:s>
                           <a:s r="116">
                              <a:s>(</a:s>
                              <a:s r="116">
                                 <a:s r="114">
                                    <a:s>Count(</a:s>
                                    <a:s r="113">
                                       <a:s>
                                          <a:s r="108">
                                             <a:s r="107">
                                                <a:s>
                                                   <a:s>PatientData.&quot;Tobacco use&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> O</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="112">
                                          <a:s>where </a:s>
                                          <a:s r="112">
                                             <a:s r="110">
                                                <a:s r="109">
                                                   <a:s>O</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="110">
                                                   <a:s>value</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s r="111"> = true</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s r="115"> >= 2</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
     or </a:s>
                        <a:s r="120">
                           <a:s r="119">
                              <a:s r="118">
                                 <a:s>ContactData</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="119">
                                 <a:s>&quot;Recently quit tobacco products&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> is true</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
     or </a:s>
                     <a:s r="131">
                        <a:s>(</a:s>
                        <a:s r="131">
                           <a:s r="129">
                              <a:s>Count(</a:s>
                              <a:s r="128">
                                 <a:s>
                                    <a:s r="123">
                                       <a:s r="122">
                                          <a:s>
                                             <a:s>PatientData.&quot;Recently quit tobacco products&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> O</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> </a:s>
                                 <a:s r="127">
                                    <a:s>where </a:s>
                                    <a:s r="127">
                                       <a:s r="125">
                                          <a:s r="124">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="125">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s r="126"> = true</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="130"> >= 2</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
     or </a:s>
                  <a:s r="137">
                     <a:s r="134">
                        <a:s r="133">
                           <a:s>ContactData</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="134">
                           <a:s>&quot;Persistent behaviours&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> in </a:s>
                     <a:s r="136">
                        <a:s r="135">
                           <a:s>Cx</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="136">
                           <a:s>&quot;Persistent behaviours - Recently quit tobacco products Choices&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="138" locator="48:3-52:114" xsi:type="Or">
            <operand localId="132" locator="48:3-51:89" xsi:type="Or">
               <operand localId="121" locator="48:3-50:60" xsi:type="Or">
                  <operand localId="117" locator="48:3-49:70" xsi:type="Or">
                     <operand localId="106" locator="48:3-48:35" xsi:type="IsTrue">
                        <operand name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="105" locator="48:3-48:27" name="Tobacco use" libraryName="ContactData" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                     <operand localId="116" locator="49:9-49:70" xsi:type="GreaterOrEqual">
                        <operand localId="114" locator="49:10-49:64" xsi:type="Count">
                           <source localId="113" locator="49:16-49:63" xsi:type="Query">
                              <source localId="108" locator="49:16-49:42" alias="O">
                                 <expression localId="107" locator="49:16-49:40" name="Tobacco use" libraryName="PatientData" xsi:type="ExpressionRef"/>
                              </source>
                              <where localId="112" locator="49:44-49:63" xsi:type="Equal">
                                 <operand name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand asType="fhir:boolean" xsi:type="As">
                                       <operand localId="110" locator="49:50-49:56" path="value" scope="O" xsi:type="Property"/>
                                    </operand>
                                 </operand>
                                 <operand localId="111" locator="49:60-49:63" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                              </where>
                           </source>
                        </operand>
                        <operand localId="115" locator="49:69" valueType="t:Integer" value="2" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="120" locator="50:9-50:60" xsi:type="IsTrue">
                     <operand name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="119" locator="50:9-50:52" name="Recently quit tobacco products" libraryName="ContactData" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="131" locator="51:9-51:89" xsi:type="GreaterOrEqual">
                  <operand localId="129" locator="51:10-51:83" xsi:type="Count">
                     <source localId="128" locator="51:16-51:82" xsi:type="Query">
                        <source localId="123" locator="51:16-51:61" alias="O">
                           <expression localId="122" locator="51:16-51:59" name="Recently quit tobacco products" libraryName="PatientData" xsi:type="ExpressionRef"/>
                        </source>
                        <where localId="127" locator="51:63-51:82" xsi:type="Equal">
                           <operand name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:boolean" xsi:type="As">
                                 <operand localId="125" locator="51:69-51:75" path="value" scope="O" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand localId="126" locator="51:79-51:82" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                        </where>
                     </source>
                  </operand>
                  <operand localId="130" locator="51:88" valueType="t:Integer" value="2" xsi:type="Literal"/>
               </operand>
            </operand>
            <operand localId="137" locator="52:9-52:114" xsi:type="AnyInValueSet">
               <codes xsi:type="Query">
                  <source alias="X">
                     <expression localId="134" locator="52:9-52:43" name="Persistent behaviours" libraryName="ContactData" xsi:type="ExpressionRef"/>
                  </source>
                  <return distinct="false">
                     <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand name="X" xsi:type="AliasRef"/>
                     </expression>
                  </return>
               </codes>
               <valueset localId="136" locator="52:48-52:114" name="Persistent behaviours - Recently quit tobacco products Choices" libraryName="Cx"/>
            </operand>
         </expression>
      </def>
      <def localId="160" locator="60:1-63:112" name="Should Conduct counselling on second-hand smoke" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="160">
               <a:s>/*
((&quot;Exposure to second&quot;hand smoke&quot; = TRUE)
  OR (IF &quot;Exposure to second-hand smoke&quot; = TRUE ON MORE THAN ONE CONTACT))
  OR (&quot;Persistent behaviours&quot; = &quot;Exposure to second-hand smoke in the home&quot;)
*/
define &quot;Should Conduct counselling on second-hand smoke&quot;:
  </a:s>
               <a:s r="159">
                  <a:s r="153">
                     <a:s r="142">
                        <a:s r="141">
                           <a:s r="140">
                              <a:s>ContactData</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="141">
                              <a:s>&quot;Exposure to second-hand smoke&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> is true</a:s>
                     </a:s>
                     <a:s>
    or </a:s>
                     <a:s r="152">
                        <a:s>(</a:s>
                        <a:s r="152">
                           <a:s r="150">
                              <a:s>Count(</a:s>
                              <a:s r="149">
                                 <a:s>
                                    <a:s r="144">
                                       <a:s r="143">
                                          <a:s>
                                             <a:s>PatientData.&quot;Exposure to second-hand smoke&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> O</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> </a:s>
                                 <a:s r="148">
                                    <a:s>where </a:s>
                                    <a:s r="148">
                                       <a:s r="146">
                                          <a:s r="145">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="146">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s r="147"> = true</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="151"> >= 2</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    or </a:s>
                  <a:s r="158">
                     <a:s r="155">
                        <a:s r="154">
                           <a:s>ContactData</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="155">
                           <a:s>&quot;Persistent behaviours&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> in </a:s>
                     <a:s r="157">
                        <a:s r="156">
                           <a:s>Cx</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="157">
                           <a:s>&quot;Persistent behaviours - Exposure to second-hand smoke Choices&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="159" locator="61:3-63:112" xsi:type="Or">
            <operand localId="153" locator="61:3-62:87" xsi:type="Or">
               <operand localId="142" locator="61:3-61:53" xsi:type="IsTrue">
                  <operand name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="141" locator="61:3-61:45" name="Exposure to second-hand smoke" libraryName="ContactData" xsi:type="ExpressionRef"/>
                  </operand>
               </operand>
               <operand localId="152" locator="62:8-62:87" xsi:type="GreaterOrEqual">
                  <operand localId="150" locator="62:9-62:81" xsi:type="Count">
                     <source localId="149" locator="62:15-62:80" xsi:type="Query">
                        <source localId="144" locator="62:15-62:59" alias="O">
                           <expression localId="143" locator="62:15-62:57" name="Exposure to second-hand smoke" libraryName="PatientData" xsi:type="ExpressionRef"/>
                        </source>
                        <where localId="148" locator="62:61-62:80" xsi:type="Equal">
                           <operand name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:boolean" xsi:type="As">
                                 <operand localId="146" locator="62:67-62:73" path="value" scope="O" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand localId="147" locator="62:77-62:80" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                        </where>
                     </source>
                  </operand>
                  <operand localId="151" locator="62:86" valueType="t:Integer" value="2" xsi:type="Literal"/>
               </operand>
            </operand>
            <operand localId="158" locator="63:8-63:112" xsi:type="AnyInValueSet">
               <codes xsi:type="Query">
                  <source alias="X">
                     <expression localId="155" locator="63:8-63:42" name="Persistent behaviours" libraryName="ContactData" xsi:type="ExpressionRef"/>
                  </source>
                  <return distinct="false">
                     <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand name="X" xsi:type="AliasRef"/>
                     </expression>
                  </return>
               </codes>
               <valueset localId="157" locator="63:47-63:112" name="Persistent behaviours - Exposure to second-hand smoke Choices" libraryName="Cx"/>
            </operand>
         </expression>
      </def>
      <def localId="196" locator="72:1-77:108" name="Should Conduct counselling on condom use" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="196">
               <a:s>/*
((((&quot;Contraceptive use of male condoms&quot; = FALSE)
  OR (&quot;Contraceptive use of female condoms&quot; = FALSE))
  OR (IF &quot;Contraceptive use of male condoms&quot; = FALSE ON MORE THAN ONE CONTACT))
  OR (IF &quot;Contraceptive use of female condoms&quot; = FALSE ON MORE THAN ONE CONTACT))
  OR (&quot;Persistent behaviours&quot; = &quot;No condom use during sex&quot;)
*/
define &quot;Should Conduct counselling on condom use&quot;:
  </a:s>
               <a:s r="195">
                  <a:s r="189">
                     <a:s r="178">
                        <a:s r="174">
                           <a:s r="163">
                              <a:s r="162">
                                 <a:s r="161">
                                    <a:s>ContactData</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="162">
                                    <a:s>&quot;Contraceptive use of male condoms&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> is false</a:s>
                           </a:s>
                           <a:s>
     or </a:s>
                           <a:s r="173">
                              <a:s>(</a:s>
                              <a:s r="173">
                                 <a:s r="171">
                                    <a:s>Count(</a:s>
                                    <a:s r="170">
                                       <a:s>
                                          <a:s r="165">
                                             <a:s r="164">
                                                <a:s>
                                                   <a:s>PatientData.&quot;Contraceptive use of male condoms&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> O</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="169">
                                          <a:s>where </a:s>
                                          <a:s r="169">
                                             <a:s r="167">
                                                <a:s r="166">
                                                   <a:s>O</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="167">
                                                   <a:s>value</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s r="168"> = false</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s r="172"> >= 2</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
     or </a:s>
                        <a:s r="177">
                           <a:s r="176">
                              <a:s r="175">
                                 <a:s>ContactData</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="176">
                                 <a:s>&quot;Contraceptive use of female condoms&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> is false</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
     or </a:s>
                     <a:s r="188">
                        <a:s>(</a:s>
                        <a:s r="188">
                           <a:s r="186">
                              <a:s>Count(</a:s>
                              <a:s r="185">
                                 <a:s>
                                    <a:s r="180">
                                       <a:s r="179">
                                          <a:s>
                                             <a:s>PatientData.&quot;Contraceptive use of female condoms&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> O</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> </a:s>
                                 <a:s r="184">
                                    <a:s>where </a:s>
                                    <a:s r="184">
                                       <a:s r="182">
                                          <a:s r="181">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="182">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s r="183"> = false</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="187"> >= 2</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
     or </a:s>
                  <a:s r="194">
                     <a:s r="191">
                        <a:s r="190">
                           <a:s>ContactData</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="191">
                           <a:s>&quot;Persistent behaviours&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> in </a:s>
                     <a:s r="193">
                        <a:s r="192">
                           <a:s>Cx</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="193">
                           <a:s>&quot;Persistent behaviours - No condom use during sex Choices&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="195" locator="73:3-77:108" xsi:type="Or">
            <operand localId="189" locator="73:3-76:95" xsi:type="Or">
               <operand localId="178" locator="73:3-75:66" xsi:type="Or">
                  <operand localId="174" locator="73:3-74:93" xsi:type="Or">
                     <operand localId="163" locator="73:3-73:58" xsi:type="IsFalse">
                        <operand name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="162" locator="73:3-73:49" name="Contraceptive use of male condoms" libraryName="ContactData" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                     <operand localId="173" locator="74:9-74:93" xsi:type="GreaterOrEqual">
                        <operand localId="171" locator="74:10-74:87" xsi:type="Count">
                           <source localId="170" locator="74:16-74:86" xsi:type="Query">
                              <source localId="165" locator="74:16-74:64" alias="O">
                                 <expression localId="164" locator="74:16-74:62" name="Contraceptive use of male condoms" libraryName="PatientData" xsi:type="ExpressionRef"/>
                              </source>
                              <where localId="169" locator="74:66-74:86" xsi:type="Equal">
                                 <operand localId="167" locator="74:72-74:78" path="value" scope="O" xsi:type="Property"/>
                                 <operand localId="168" locator="74:82-74:86" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                              </where>
                           </source>
                        </operand>
                        <operand localId="172" locator="74:92" valueType="t:Integer" value="2" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="177" locator="75:9-75:66" xsi:type="IsFalse">
                     <operand name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="176" locator="75:9-75:57" name="Contraceptive use of female condoms" libraryName="ContactData" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="188" locator="76:9-76:95" xsi:type="GreaterOrEqual">
                  <operand localId="186" locator="76:10-76:89" xsi:type="Count">
                     <source localId="185" locator="76:16-76:88" xsi:type="Query">
                        <source localId="180" locator="76:16-76:66" alias="O">
                           <expression localId="179" locator="76:16-76:64" name="Contraceptive use of female condoms" libraryName="PatientData" xsi:type="ExpressionRef"/>
                        </source>
                        <where localId="184" locator="76:68-76:88" xsi:type="Equal">
                           <operand localId="182" locator="76:74-76:80" path="value" scope="O" xsi:type="Property"/>
                           <operand localId="183" locator="76:84-76:88" valueType="t:Boolean" value="false" xsi:type="Literal"/>
                        </where>
                     </source>
                  </operand>
                  <operand localId="187" locator="76:94" valueType="t:Integer" value="2" xsi:type="Literal"/>
               </operand>
            </operand>
            <operand localId="194" locator="77:9-77:108" xsi:type="AnyInValueSet">
               <codes xsi:type="Query">
                  <source alias="X">
                     <expression localId="191" locator="77:9-77:43" name="Persistent behaviours" libraryName="ContactData" xsi:type="ExpressionRef"/>
                  </source>
                  <return distinct="false">
                     <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand name="X" xsi:type="AliasRef"/>
                     </expression>
                  </return>
               </codes>
               <valueset localId="193" locator="77:48-77:108" name="Persistent behaviours - No condom use during sex Choices" libraryName="Cx"/>
            </operand>
         </expression>
      </def>
      <def localId="290" locator="87:1-109:96" name="Should Conduct counselling on alcohol/substance use" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="290">
               <a:s>/*
(((((&quot;Current alcohol and/or other substance use&quot; = &quot;Alcohol&quot;)
  OR (IF  &quot;Current alcohol and/or other substance use&quot; = &quot;Alcohol&quot; ON MORE THAN ONE CONTACT))
  OR (&quot;Persistent behaviours&quot; = &quot;Alcohol use&quot;))
  OR (&quot;Current alcohol and/or other substance use&quot; = &quot;Marijuana&quot; AND/OR &quot;Cocaine&quot; AND/OR &quot;Crack&quot; AND/OR &quot;Injectable drugs&quot; AND/OR &quot;Other substance use (specify)&quot;))
  OR (IF &quot;Current alcohol and/or other substance use&quot; = &quot;Marijuana&quot; AND/OR &quot;Cocaine&quot; AND/OR &quot;Crack&quot; AND/OR &quot;Injectable drugs&quot; AND/OR &quot;Other substance use (specify)&quot; ON MORE THAN ONE CONTACT))
  OR (&quot;Persistent behaviours&quot; = &quot;Substance use&quot;)
*/
define &quot;Should Conduct counselling on alcohol/substance use&quot;:
  </a:s>
               <a:s r="289">
                  <a:s r="283">
                     <a:s r="245">
                        <a:s r="239">
                           <a:s r="233">
                              <a:s r="227">
                                 <a:s r="221">
                                    <a:s r="215">
                                       <a:s r="201">
                                          <a:s r="198">
                                             <a:s r="197">
                                                <a:s>ContactData</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="198">
                                                <a:s>&quot;Current alcohol and/or other substance use&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> in </a:s>
                                          <a:s r="200">
                                             <a:s r="199">
                                                <a:s>Cx</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="200">
                                                <a:s>&quot;Current alcohol and/or other substance use - Alcohol Choices&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
    or </a:s>
                                       <a:s r="214">
                                          <a:s>(
      </a:s>
                                          <a:s r="214">
                                             <a:s r="212">
                                                <a:s>Count(
        </a:s>
                                                <a:s r="211">
                                                   <a:s>
                                                      <a:s r="203">
                                                         <a:s r="202">
                                                            <a:s>
                                                               <a:s>PatientData.&quot;Current alcohol and/or other substance use&quot;</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s> O</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>
          </a:s>
                                                   <a:s r="210">
                                                      <a:s>where </a:s>
                                                      <a:s r="210">
                                                         <a:s r="207">
                                                            <a:s r="205">
                                                               <a:s r="204">
                                                                  <a:s>O</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="205">
                                                                  <a:s>value</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s> as </a:s>
                                                            <a:s r="206">
                                                               <a:s>FHIR.CodeableConcept</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s> in </a:s>
                                                         <a:s r="209">
                                                            <a:s r="208">
                                                               <a:s>Cx</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="209">
                                                               <a:s>&quot;Current alcohol and/or other substance use - Alcohol Choices&quot;</a:s>
                                                            </a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>
      )</a:s>
                                             </a:s>
                                             <a:s r="213"> >= 2</a:s>
                                          </a:s>
                                          <a:s>
    )</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
    or </a:s>
                                    <a:s r="220">
                                       <a:s r="217">
                                          <a:s r="216">
                                             <a:s>ContactData</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="217">
                                             <a:s>&quot;Persistent behaviours&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> in </a:s>
                                       <a:s r="219">
                                          <a:s r="218">
                                             <a:s>Cx</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="219">
                                             <a:s>&quot;Persistent behaviours - Alcohol use Choices&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    or </a:s>
                                 <a:s r="226">
                                    <a:s r="223">
                                       <a:s r="222">
                                          <a:s>ContactData</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="223">
                                          <a:s>&quot;Current alcohol and/or other substance use&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="225">
                                       <a:s r="224">
                                          <a:s>Cx</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="225">
                                          <a:s>&quot;Current alcohol and/or other substance use - Marijuana Choices&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    or </a:s>
                              <a:s r="232">
                                 <a:s r="229">
                                    <a:s r="228">
                                       <a:s>ContactData</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="229">
                                       <a:s>&quot;Current alcohol and/or other substance use&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> in </a:s>
                                 <a:s r="231">
                                    <a:s r="230">
                                       <a:s>Cx</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="231">
                                       <a:s>&quot;Current alcohol and/or other substance use - Cocaine Choices&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    or </a:s>
                           <a:s r="238">
                              <a:s r="235">
                                 <a:s r="234">
                                    <a:s>ContactData</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="235">
                                    <a:s>&quot;Current alcohol and/or other substance use&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="237">
                                 <a:s r="236">
                                    <a:s>Cx</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="237">
                                    <a:s>&quot;Current alcohol and/or other substance use - Injectable drugs Choices&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    or </a:s>
                        <a:s r="244">
                           <a:s r="241">
                              <a:s r="240">
                                 <a:s>ContactData</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="241">
                                 <a:s>&quot;Current alcohol and/or other substance use&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="243">
                              <a:s r="242">
                                 <a:s>Cx</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="243">
                                 <a:s>&quot;Current alcohol and/or other substance use - Other (specify) Choices&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    or </a:s>
                     <a:s r="282">
                        <a:s>(
      </a:s>
                        <a:s r="282">
                           <a:s r="280">
                              <a:s>Count(
        </a:s>
                              <a:s r="279">
                                 <a:s>
                                    <a:s r="247">
                                       <a:s r="246">
                                          <a:s>
                                             <a:s>PatientData.&quot;Current alcohol and/or other substance use&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> O</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
          </a:s>
                                 <a:s r="278">
                                    <a:s>where </a:s>
                                    <a:s r="278">
                                       <a:s r="270">
                                          <a:s r="262">
                                             <a:s r="254">
                                                <a:s r="251">
                                                   <a:s r="249">
                                                      <a:s r="248">
                                                         <a:s>O</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="249">
                                                         <a:s>value</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> as </a:s>
                                                   <a:s r="250">
                                                      <a:s>FHIR.CodeableConcept</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> in </a:s>
                                                <a:s r="253">
                                                   <a:s r="252">
                                                      <a:s>Cx</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="253">
                                                      <a:s>&quot;Current alcohol and/or other substance use - Marijuana Choices&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>
            or </a:s>
                                             <a:s r="261">
                                                <a:s r="258">
                                                   <a:s r="256">
                                                      <a:s r="255">
                                                         <a:s>O</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="256">
                                                         <a:s>value</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> as </a:s>
                                                   <a:s r="257">
                                                      <a:s>FHIR.CodeableConcept</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> in </a:s>
                                                <a:s r="260">
                                                   <a:s r="259">
                                                      <a:s>Cx</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="260">
                                                      <a:s>&quot;Current alcohol and/or other substance use - Cocaine Choices&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
            or </a:s>
                                          <a:s r="269">
                                             <a:s r="266">
                                                <a:s r="264">
                                                   <a:s r="263">
                                                      <a:s>O</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="264">
                                                      <a:s>value</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> as </a:s>
                                                <a:s r="265">
                                                   <a:s>FHIR.CodeableConcept</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> in </a:s>
                                             <a:s r="268">
                                                <a:s r="267">
                                                   <a:s>Cx</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="268">
                                                   <a:s>&quot;Current alcohol and/or other substance use - Injectable drugs Choices&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
            or </a:s>
                                       <a:s r="277">
                                          <a:s r="274">
                                             <a:s r="272">
                                                <a:s r="271">
                                                   <a:s>O</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="272">
                                                   <a:s>value</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> as </a:s>
                                             <a:s r="273">
                                                <a:s>FHIR.CodeableConcept</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> in </a:s>
                                          <a:s r="276">
                                             <a:s r="275">
                                                <a:s>Cx</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="276">
                                                <a:s>&quot;Current alcohol and/or other substance use - Other (specify) Choices&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
      )</a:s>
                           </a:s>
                           <a:s r="281"> >= 2</a:s>
                        </a:s>
                        <a:s>
    )</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    or </a:s>
                  <a:s r="288">
                     <a:s r="285">
                        <a:s r="284">
                           <a:s>ContactData</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="285">
                           <a:s>&quot;Persistent behaviours&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> in </a:s>
                     <a:s r="287">
                        <a:s r="286">
                           <a:s>Cx</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="287">
                           <a:s>&quot;Persistent behaviours - Substance use Choices&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="289" locator="88:3-109:96" xsi:type="Or">
            <operand localId="283" locator="88:3-108:5" xsi:type="Or">
               <operand localId="245" locator="88:3-99:140" xsi:type="Or">
                  <operand localId="239" locator="88:3-98:141" xsi:type="Or">
                     <operand localId="233" locator="88:3-97:132" xsi:type="Or">
                        <operand localId="227" locator="88:3-96:134" xsi:type="Or">
                           <operand localId="221" locator="88:3-95:94" xsi:type="Or">
                              <operand localId="215" locator="88:3-94:5" xsi:type="Or">
                                 <operand localId="201" locator="88:3-88:127" xsi:type="AnyInValueSet">
                                    <codes xsi:type="Query">
                                       <source alias="X">
                                          <expression localId="198" locator="88:3-88:58" name="Current alcohol and/or other substance use" libraryName="ContactData" xsi:type="ExpressionRef"/>
                                       </source>
                                       <return distinct="false">
                                          <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand name="X" xsi:type="AliasRef"/>
                                          </expression>
                                       </return>
                                    </codes>
                                    <valueset localId="200" locator="88:63-88:127" name="Current alcohol and/or other substance use - Alcohol Choices" libraryName="Cx"/>
                                 </operand>
                                 <operand localId="214" locator="89:8-94:5" xsi:type="GreaterOrEqual">
                                    <operand localId="212" locator="90:7-93:7" xsi:type="Count">
                                       <source localId="211" locator="91:9-92:116" xsi:type="Query">
                                          <source localId="203" locator="91:9-91:66" alias="O">
                                             <expression localId="202" locator="91:9-91:64" name="Current alcohol and/or other substance use" libraryName="PatientData" xsi:type="ExpressionRef"/>
                                          </source>
                                          <where localId="210" locator="92:11-92:116" xsi:type="InValueSet">
                                             <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                                <operand localId="207" locator="92:17-92:47" strict="false" xsi:type="As">
                                                   <operand localId="205" locator="92:17-92:23" path="value" scope="O" xsi:type="Property"/>
                                                   <asTypeSpecifier localId="206" locator="92:28-92:47" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                                                </operand>
                                             </code>
                                             <valueset localId="209" locator="92:52-92:116" name="Current alcohol and/or other substance use - Alcohol Choices" libraryName="Cx"/>
                                          </where>
                                       </source>
                                    </operand>
                                    <operand localId="213" locator="93:12" valueType="t:Integer" value="2" xsi:type="Literal"/>
                                 </operand>
                              </operand>
                              <operand localId="220" locator="95:8-95:94" xsi:type="AnyInValueSet">
                                 <codes xsi:type="Query">
                                    <source alias="X">
                                       <expression localId="217" locator="95:8-95:42" name="Persistent behaviours" libraryName="ContactData" xsi:type="ExpressionRef"/>
                                    </source>
                                    <return distinct="false">
                                       <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand name="X" xsi:type="AliasRef"/>
                                       </expression>
                                    </return>
                                 </codes>
                                 <valueset localId="219" locator="95:47-95:94" name="Persistent behaviours - Alcohol use Choices" libraryName="Cx"/>
                              </operand>
                           </operand>
                           <operand localId="226" locator="96:8-96:134" xsi:type="AnyInValueSet">
                              <codes xsi:type="Query">
                                 <source alias="X">
                                    <expression localId="223" locator="96:8-96:63" name="Current alcohol and/or other substance use" libraryName="ContactData" xsi:type="ExpressionRef"/>
                                 </source>
                                 <return distinct="false">
                                    <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand name="X" xsi:type="AliasRef"/>
                                    </expression>
                                 </return>
                              </codes>
                              <valueset localId="225" locator="96:68-96:134" name="Current alcohol and/or other substance use - Marijuana Choices" libraryName="Cx"/>
                           </operand>
                        </operand>
                        <operand localId="232" locator="97:8-97:132" xsi:type="AnyInValueSet">
                           <codes xsi:type="Query">
                              <source alias="X">
                                 <expression localId="229" locator="97:8-97:63" name="Current alcohol and/or other substance use" libraryName="ContactData" xsi:type="ExpressionRef"/>
                              </source>
                              <return distinct="false">
                                 <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand name="X" xsi:type="AliasRef"/>
                                 </expression>
                              </return>
                           </codes>
                           <valueset localId="231" locator="97:68-97:132" name="Current alcohol and/or other substance use - Cocaine Choices" libraryName="Cx"/>
                        </operand>
                     </operand>
                     <operand localId="238" locator="98:8-98:141" xsi:type="AnyInValueSet">
                        <codes xsi:type="Query">
                           <source alias="X">
                              <expression localId="235" locator="98:8-98:63" name="Current alcohol and/or other substance use" libraryName="ContactData" xsi:type="ExpressionRef"/>
                           </source>
                           <return distinct="false">
                              <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand name="X" xsi:type="AliasRef"/>
                              </expression>
                           </return>
                        </codes>
                        <valueset localId="237" locator="98:68-98:141" name="Current alcohol and/or other substance use - Injectable drugs Choices" libraryName="Cx"/>
                     </operand>
                  </operand>
                  <operand localId="244" locator="99:8-99:140" xsi:type="AnyInValueSet">
                     <codes xsi:type="Query">
                        <source alias="X">
                           <expression localId="241" locator="99:8-99:63" name="Current alcohol and/or other substance use" libraryName="ContactData" xsi:type="ExpressionRef"/>
                        </source>
                        <return distinct="false">
                           <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand name="X" xsi:type="AliasRef"/>
                           </expression>
                        </return>
                     </codes>
                     <valueset localId="243" locator="99:68-99:140" name="Current alcohol and/or other substance use - Other (specify) Choices" libraryName="Cx"/>
                  </operand>
               </operand>
               <operand localId="282" locator="100:8-108:5" xsi:type="GreaterOrEqual">
                  <operand localId="280" locator="101:7-107:7" xsi:type="Count">
                     <source localId="279" locator="102:9-106:123" xsi:type="Query">
                        <source localId="247" locator="102:9-102:66" alias="O">
                           <expression localId="246" locator="102:9-102:64" name="Current alcohol and/or other substance use" libraryName="PatientData" xsi:type="ExpressionRef"/>
                        </source>
                        <where localId="278" locator="103:11-106:123" xsi:type="Or">
                           <operand localId="270" locator="103:17-105:124" xsi:type="Or">
                              <operand localId="262" locator="103:17-104:115" xsi:type="Or">
                                 <operand localId="254" locator="103:17-103:118" xsi:type="InValueSet">
                                    <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="251" locator="103:17-103:47" strict="false" xsi:type="As">
                                          <operand localId="249" locator="103:17-103:23" path="value" scope="O" xsi:type="Property"/>
                                          <asTypeSpecifier localId="250" locator="103:28-103:47" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </code>
                                    <valueset localId="253" locator="103:52-103:118" name="Current alcohol and/or other substance use - Marijuana Choices" libraryName="Cx"/>
                                 </operand>
                                 <operand localId="261" locator="104:16-104:115" xsi:type="InValueSet">
                                    <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="258" locator="104:16-104:46" strict="false" xsi:type="As">
                                          <operand localId="256" locator="104:16-104:22" path="value" scope="O" xsi:type="Property"/>
                                          <asTypeSpecifier localId="257" locator="104:27-104:46" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </code>
                                    <valueset localId="260" locator="104:51-104:115" name="Current alcohol and/or other substance use - Cocaine Choices" libraryName="Cx"/>
                                 </operand>
                              </operand>
                              <operand localId="269" locator="105:16-105:124" xsi:type="InValueSet">
                                 <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="266" locator="105:16-105:46" strict="false" xsi:type="As">
                                       <operand localId="264" locator="105:16-105:22" path="value" scope="O" xsi:type="Property"/>
                                       <asTypeSpecifier localId="265" locator="105:27-105:46" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </code>
                                 <valueset localId="268" locator="105:51-105:124" name="Current alcohol and/or other substance use - Injectable drugs Choices" libraryName="Cx"/>
                              </operand>
                           </operand>
                           <operand localId="277" locator="106:16-106:123" xsi:type="InValueSet">
                              <code name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="274" locator="106:16-106:46" strict="false" xsi:type="As">
                                    <operand localId="272" locator="106:16-106:22" path="value" scope="O" xsi:type="Property"/>
                                    <asTypeSpecifier localId="273" locator="106:27-106:46" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </code>
                              <valueset localId="276" locator="106:51-106:123" name="Current alcohol and/or other substance use - Other (specify) Choices" libraryName="Cx"/>
                           </operand>
                        </where>
                     </source>
                  </operand>
                  <operand localId="281" locator="107:12" valueType="t:Integer" value="2" xsi:type="Literal"/>
               </operand>
            </operand>
            <operand localId="288" locator="109:8-109:96" xsi:type="AnyInValueSet">
               <codes xsi:type="Query">
                  <source alias="X">
                     <expression localId="285" locator="109:8-109:42" name="Persistent behaviours" libraryName="ContactData" xsi:type="ExpressionRef"/>
                  </source>
                  <return distinct="false">
                     <expression name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand name="X" xsi:type="AliasRef"/>
                     </expression>
                  </return>
               </codes>
               <valueset localId="287" locator="109:47-109:96" name="Persistent behaviours - Substance use Choices" libraryName="Cx"/>
            </operand>
         </expression>
      </def>
   </statements>
</library>
